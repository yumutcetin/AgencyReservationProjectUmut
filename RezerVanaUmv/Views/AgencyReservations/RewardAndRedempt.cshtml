@model RezerVanaUmv.ViewModels.UserTotalPointsViewModel
@{
    ViewData["Title"] = "Points Overview";
    Layout = "~/Views/PageViews/UserLayout.cshtml";
}
<!-- DataTables CSS -->
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/dataTables.bootstrap5.min.css" />

<!-- Ödül Sekmeleri -->
<div class="container mt-5">
    <h2 class="mb-3">🎁 @RezerVanaUmv.Resources.Resource.Kazanılabilecek_ve_Harcanabilecek_Puan_Tablosu</h2>

    <ul class="nav nav-tabs" id="pointTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="reward-tab" data-bs-toggle="tab" data-bs-target="#reward"
                    type="button" role="tab" aria-controls="reward" aria-selected="true">
                @RezerVanaUmv.Resources.Resource.Kazanılabilecek_Gecelik_Puanlar
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="spent-tab" data-bs-toggle="tab" data-bs-target="#spent"
                    type="button" role="tab" aria-controls="spent" aria-selected="false">
                @RezerVanaUmv.Resources.Resource.Harcanabilecek_Puanlar_Gecelik
            </button>
        </li>
    </ul>

    <div class="tab-content pt-3" id="pointTabsContent">
        <!-- Kazanılabilecek Ödüller -->
        <div class="tab-pane fade show active" id="reward" role="tabpanel" aria-labelledby="reward-tab">
            <div class="table-responsive">
                <table id="rewardCatalogTable" class="table table-bordered table-striped align-middle w-100">
                    <thead class="table-dark">
                        <tr>
                            <th>🏨@RezerVanaUmv.Resources.Resource.Otel_Adı</th>
                            <th>🛏️ @RezerVanaUmv.Resources.Resource.Oda_Tipi</th>
                            <th>📅 @RezerVanaUmv.Resources.Resource.Giriş_Tarihi</th>
                            <th>📅 @RezerVanaUmv.Resources.Resource.Çıkış_Tarihi</th>
                            <th>⭐ @RezerVanaUmv.Resources.Resource.Kazanılabilecek_Gecelik_Puan</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.RewardCatalogs)
                        {
                            <tr>
                                <td>@item.HotelName</td>
                                <td>@item.RoomType</td>
                                <td>@item.StartDate?.ToString("dd-MM-yyyy")</td>
                                <td>@item.EndDate?.ToString("dd-MM-yyyy")</td>
                                <td>@item.RequiredPoints</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Harcanan Ödüller -->
        <div class="tab-pane fade" id="spent" role="tabpanel" aria-labelledby="spent-tab">
            <div class="table-responsive">
                <table id="redemptionTable" class="table table-bordered table-striped align-middle w-100">
                    <thead class="table-dark">
                        <tr>
                            r>
                            <th>🏨@RezerVanaUmv.Resources.Resource.Otel_Adı</th>
                            <th>🛏️ @RezerVanaUmv.Resources.Resource.Oda_Tipi</th>
                            <th>📅 @RezerVanaUmv.Resources.Resource.Giriş_Tarihi</th>
                            <th>📅 @RezerVanaUmv.Resources.Resource.Çıkış_Tarihi</th>
                            <th>⭐  @RezerVanaUmv.Resources.Resource.Harcanabilecek_Gecelik_Puan</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.RedemptionRecords)
                        {
                            <tr>
                                <td>@item.HotelName</td>
                                <td>@item.RoomType</td>
                                <td>@item.StartDate?.ToString("dd-MM-yyyy")</td>
                                <td>@item.EndDate?.ToString("dd-MM-yyyy")</td>
                                <td>@item.RequiredPoints</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- DataTables JS -->
@section Scripts {
    <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.4/js/dataTables.bootstrap5.min.js"></script>

    <!-- Bootstrap 5 JS ve Popper -->
    <script src="https://cdn.jsdelivr.net/npm/@@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"></script>

    <script>
        $(document).ready(function () {
            $('#rewardCatalogTable').DataTable({
                language: {
                    url: '//cdn.datatables.net/plug-ins/1.13.4/i18n/tr.json'
                },
                stateSave: true,
                stateDuration: -1,
                stateLoadParams: function (settings, data) {
                    var navigationType = performance.getEntriesByType("navigation")[0].type;
                    if (navigationType !== 'back_forward') {
                        return false;
                    }
                },
                responsive: true
            });
            $('#redemptionTable').DataTable({
                language: {
                    url: '//cdn.datatables.net/plug-ins/1.13.4/i18n/tr.json'
                },
                stateSave: true,
                stateDuration: -1,
                stateLoadParams: function (settings, data) {
                    var navigationType = performance.getEntriesByType("navigation")[0].type;
                    if (navigationType !== 'back_forward') {
                        return false;
                    }
                },
                responsive: true
            });
        });
    </script>
}
